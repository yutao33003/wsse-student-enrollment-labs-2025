openapi: "3.0.0" 
info:
  title: "Student Enrollment API"
  version: "0.2.0"
servers:
  - url: "https://api.example.edu/api/v1"

paths:
  /health:
    get:
      summary: "Health check"
      security: [] 
      responses:
        "200": { description: "OK" }

  /students:
    get:
      summary: "List students"
      security:
        - CognitoOAuth2: ["api://students/read"]
      responses:
        "200": { description: "OK" }
    post:
      summary: "Create student"
      security:
        - CognitoOAuth2: ["api://students/write"]
      responses:
        "201": { description: "Created" }

components:
  securitySchemes:
    CognitoOAuth2:
      type: oauth2
      flows:
        authorizationCode:
          # !!! 請檢查你的 Domain 前綴是否為 ap-southeast-2aoamevt37
          authorizationUrl: "https://ap-southeast-2aoamevt37.auth.ap-southeast-2.amazoncognito.com/oauth2/authorize"
          tokenUrl: "https://ap-southeast-2aoamevt37.auth.ap-southeast-2.amazoncognito.com/oauth2/token"
          scopes:
            api://students/read: "Read student data"
            api://students/write: "Create/modify student data"

security:
  - CognitoOAuth2: ["api://students/read"]
